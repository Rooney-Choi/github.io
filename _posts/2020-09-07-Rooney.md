---
title: "반사강도 모델링 - 거리"
date: 2020-09-07
categories: post6
---

이전 글 **반사강도 모델링 - 입사각**에서는 LiDAR 센서에서 입사각에 따라 변화되는 반사강도에 대해 설명드렸습니다.
오늘은 앞의 글에서 설명드렸던 **Level 1** 반사강도 가공에서 중요한 요소인 **입사각**에 이어서 **거리**와 관련된 현상을 자세히 설명드리도록 하겠습니다.

물리학에서의 **역제곱 법칙(inverse square law)**은 어떤 힘의 크기가 거리의 제곱에 반비례하는 것을 의미합니다.
이 규칙에 해당하는 대표적인 예로는 중력, 뉴턴의 중력 법칙, 쿨롱의 법칙, 그리고 **빛의 세기**가 있습니다.

<p align="center"><img src="https://user-images.githubusercontent.com/69247445/92342893-3c764f00-f0fd-11ea-9945-864125e5b39f.png"></p>

**그림 1**. 역제곱 법칙 - 한 면적 안의 선 개수는 거리의 제곱에 반비례

**참조**: *<https://en.wikipedia.org/wiki/Inverse-square_law>*

그림과 같이 역제곱 법칙에서는 거리가 멀어질수록 면적 안의 선 개수가 줄어드는 것을 확인할 수 있고, 거리의 제곱에 반비례합니다.
**빛의 세기**도 이 법칙이 적용되고, 아래 그림과 같이 거리에 따라 반사강도 값 비율이 반비례하게 감소하는 것을 확인할 수 있습니다.

<p align="center"><img src="https://user-images.githubusercontent.com/69247445/92344774-5b2b1480-f102-11ea-81a1-7bd8329d5278.jpg"></p>

**그림 2**. 빛의 세기 - 역제곱 법칙

**참조**: *<https://www.diyphotography.net/>*

이러한 법칙은 현실세계에서 보실 수 있습니다. 
예전 글에서 설명드렸던 것처럼 야간에 가로등을 보시면 가로등에 가까울수록 밝지만, 가로등에 멀어질수록 밝기가 어두워지는 것이 이러한 원리입니다.
이러한 법칙을 보다 사실적으로 렌더링하기 위해 컴퓨터 그래픽스에서는 이전 글에서 설명드렸던 "입사각"과 함께 "거리"에 의한 감쇠효과를 렌더링에 적용하고 있습니다.
렌더링 과정에서 빛이 표면에 반사 될 때, 표면에서 발생하는 난반사 및 정반사에서 빛과 표면 사이 거리의 제곱을 나눠줌으로써 거리에 의한 감쇠를 표현합니다.
이렇게 생성된 렌더링 결과는 아래와 같이 나타나며, 야간에 가로등을 보는 것과 같이 거리에 의해 반사강도가 감소하는 것을 확인할 수 있습니다.

<p align="center"><img src="https://user-images.githubusercontent.com/69247445/92347106-dfcd6100-f109-11ea-902a-9c5875c1b1ea.PNG"></p>

**그림 3**. 거리 감쇠가 적용된 렌더링 결과

**참조**: *<http://courses.washington.edu/>*

이러한 거리에 의한 반사강도 감쇠 현상은 LiDAR에서도 동일하게 나타납니다.
따라서, 동일한 물질(material)을 가지는 표면은 같은 반사강도 값을 가지도록 하는 **반사강도 모델링**에서는 이러한 **거리**에 의한 감쇠 효과를 제거해주는 작업이 필요합니다.
이전 글에서 설명드린 **입사각**에 발생하는 감쇠효과도 같이 제거해주면 **Level 1의 반사강도 모델링**을 수행할 수 있습니다.

이러한 반사강도 모델링을 수행하기 위해서는 아래와 같이 LiDAR에서 획득되는 3차원 점 군으로 부터 **거리**와 **법선** 정보를 계산해야 합니다.
**거리**는 3차원 점 군에서 LiDAR의 중심점 사이의 거리를 통해 아래의 왼쪽 그림과 같이 계산됩니다.
**법선**은 하나의 점에서 주변 점들과의 관계를 통해 하나의 평면을 생성하고, 생성된 평면의 법선을 통해 계산됩니다.
여기에서, 법선의 방향은 LiDAR를 바라보는 방향으로 계산하면 오른쪽 아래 그림과 같이 계산됩니다.

<p align="center"><img src="https://user-images.githubusercontent.com/69247445/92350752-ddbccf80-f114-11ea-8173-97522053fe87.png"></p>

**그림 4**. LiDAR 데이터 거리 및 법선 추정

이러한 결과를 바탕으로 LiDAR 반사강도 모델링에서는 **거리**와 **입사각**에 의해 감쇠하는 값을 보정하고 있습니다.
하지만, 이러한 감쇠들이 경향성은 비슷할수 있어도, LiDAR의 종류 및 특성에 따라 이러한 값들이 조금씩 다릅니다. 
빛의 세기가 강해서 가까운 거리에 대해서는 거리와 반비례하지 않게 감쇠하는 LiDAR도 있고, 거리 및 입사각에 의한 감쇠 경향성을 띄지 않는 LiDAR도 존재합니다.
따라서, 최근에는 실험에 기반하여 LUT(Look-up Table) 형태로 이러한 감쇠효과를 기록하고, 모델링하기도 합니다.

그렇기 때문에 이전 글에서 말씀드렸듯이 LiDAR 반사강도 모델링에 대한 정확한 정답은 없습니다. 
하지만 LiDAR에 대한 지속적인 연구가 진행된다면 언젠가는 같은 물질(material)로 이루어진 객체에 대해서는 같은 반사강도 값을 가지도록 모델링 할 수 있을 것이라 생각합니다.


> **한 줄 요약:** **거리감없이 친근한 LiDAR**: 같은 객체를 멀리있으나 가까이있으나 동일한 반사도를 획득하기 위해서는 **거리**에 의한 감쇠를 보정해야 합니다.

<script id="dsq-count-scr" src="//rooney-choi.disqus.com/count.js" async></script>
