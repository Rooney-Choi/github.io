---
title: "반사강도 모델링에서 중요한 요소는?"
date: 2020-09-01
categories: post5
---

이전 글 **빛이 표면에 반사되면?**에서는 컴퓨터 그래픽스 분야에서의 외관/반사함수 모델링 이론과 함께 LiDAR의 반사강도 모델링을 간단히 소개 드렸습니다.

이전 글에서 말씀드렸던 것처럼 **법선**과 **거리**는 반사강도 모델링에서 중요한 요소들입니다.
반사강도 모델링 분야에서는 위의 두 요소들을 고려한 반사강도를 **Level 1** 단계로 정의하고 있고, 가공되지 않은 반사강도를 **Level 0**, 
0-1 또는 0-255 형태로 **정규화(normalization)**을 수행한 반사강도를 **Level 2**, Radiometric 보정과 캘리브레이션을 수행한 반사강도를 **Level 3**으로 정의하고 있습니다.

오늘은 **Level 1**에서의 **법선**과 관련된 현상을 자세히 설명드리도록 하겠습니다.

컴퓨터 그래픽스 분야에서는 다양한 재질(불투명, 반투명, 투명)에 대한 반사특성을 반영하여 여러 반사함수 모델링 방법들이 제안되고 있습니다.
반투명, 투명 등에서는 표면에서의 빛 투과 후 산란 효과 또는 표면의 다중 레이어에 대한 모델링 등을 포함하여 복잡한 모델링을 수행해야합니다.
오늘은 비교적 간단히 모델링을 할 수 있고, 주변에서 많이 볼 수 있는 불투명 객체에 대해 설명드리도록 하겠습니다.

<p align="center"><img src="https://user-images.githubusercontent.com/69247445/91785286-f96d3500-ec3f-11ea-8b7f-59df473c8397.jpg"></p>

**그림 1**. 불투명한 객체에서의 정반사(specular reflection)와 난반사(diffuse reflection)

**참조**: *<https://micro.magnet.fsu.edu/primer/java/reflection/specular>*


컴퓨터 그래픽스 분야에서는 불투명한 객체의 색상 또는 밝기를 난반사(diffuse)와 정반사(specular)의 조합을 통해 표현합니다.
난반사는 **람버시안(Lambertian)** 반사율을 통해 모델링을 수행합니다. 람버시안 반사율을 가지는 표면은 시점(view)과 관계없이
어떤 방향에서 바라보더라도 동일한 밝기로 보이게 됩니다. 주변에서 흔히 볼수 있는 A4 용지는 각도에 따라 밝기가 변하지 않기 때문에
람버시안 표면에 가깝다고 보시면 됩니다. 이에 반해 자동차 표면 같은 경우는 보는 시점에 따라 밝기가 다르므로 람버시안 표면이 아니다라고
생각하시면 됩니다.

<p align="center"><img src="https://user-images.githubusercontent.com/69247445/91787806-a5fde580-ec45-11ea-951e-c35617906d24.png"></p>

**그림 2**. 람버시안 코사인 법칙


람버시안 반사율을 가지는 표면에서 빛이 들어오는 각도에 따라 밝기가 변하는 것들을 컴퓨터 그래픽스, 광학 분야에서는 **람버시안 코사인 법칙**이라고 부릅니다.
람버시안 코사인 법칙은 람버시안 표면을 바라볼 때의 밝기 값은 들어오는 빛의 방향과 표면의 법선이 이루는 각의 Cosine에 비례한다라는 이론입니다.
다시 말해, 들어오는 빛이 법선벡터에 가까우면 반사되는 빛의 세기가 더 커지게 됩니다.

<p align="center"><img src="https://user-images.githubusercontent.com/69247445/91788743-f2e2bb80-ec47-11ea-9e23-547c1b440215.png"></p>

**그림 3**. LiDAR 데이터 가공: (좌) 법선 추정 결과, (중) 람버시안 반사율 기반 반사강도 추정 결과, (우) LiDAR 측정 반사강도 값 


LiDAR에서는 3차원 점 군과 함께 그에 해당하는 반사 강도 값이 획득됩니다. 획득된 3차원 점 군에서는 위의 그림과 같이 법선을 추정할 수 있고, 
결과를 통해 람버시안 반사율 기반 반사강도 값도 추정이 가능합니다. 이 결과를 LiDAR 측정 반사강도 값과 비교하면 비슷한 경향성을 가지는 것을 확인할 수 있습니다.
실제로, LiDAR 센서를 통해 LiDAR에서 나오는 빛과 표면에 대한 상관관계에 대한 연구를 실험적으로 많이 수행되었고, 
그 결과, 람버시안 코사인 법칙과 유사한 형태로 빛의 반사가 감소하는 하는 결과를 확인할 수 있었다고 합니다.
이러한 결과를 바탕으로 LiDAR 반사강도 모델링에서는 빛의 방향과 표면의 법선의 각도에 의해 감쇠하는 값들을 통해 보정을 수행하고 있습니다.
추가적으로, 물체의 재질/반사되는 정도에 따라 다르게 나타나는 **정반사**를 함께 모델링하면 반사강도 추정 결과와 LiDAR에서 측정된 반사 강도 값의 차이를 최소화 할 수 있습니다.

아직까지는 LiDAR 반사강도 모델링에 대한 정확한 정답은 없습니다. 
하지만 LiDAR 센서의 하드웨어 발전과 그에 상응하는 반사강도 모델링 방법이 개선된다면 현재 반사강도 값을 보다 사진처럼 만들 수도 있고,
같은 물질(material)로 이루어진 객체에 대해서는 같은 반사강도 값을 가지도록 모델링 할 수 있을 것이라 기대합니다.


오늘은 **Level 1** 단계에서의 **법선(입사각)**을 통한 반사강도 보정을 설명드렸고, 추후 글들에서는 **Level 1**에서의 **거리**에 의한 반사강도 보정,
**Level 2**의 **정규화** 과정, **Level 3**의 **Radiometric 보정**에 대해 설명드리도록 하겠습니다.


> **한 줄 요약:** **각도가 생명이다**: LiDAR 반사강도 모델링에서 가장 중요한 요소 중 하나는 **입사각**입니다.

<script id="dsq-count-scr" src="//rooney-choi.disqus.com/count.js" async></script>
